{"ast":null,"code":"var _jsxFileName = \"/home/dci/Desktop/AllAufgaben/Final Projekt/final-project/frontend/src/components/Navbar/Pages/Articles.js\",\n    _s = $RefreshSig$();\n\nimport CreateArticle from \"../../Articles/CreateArticle/CreateArticle\";\nimport Article from \"../../Articles/Article/Article\";\nimport AllArticles from \"../../Articles/AllArticles/AllArticles\";\nimport { useState, useEffect } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { useJwt } from \"react-jwt\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst token = localStorage.getItem(\"food-token\");\n\nconst Articles = () => {\n  _s();\n\n  const {\n    decodedToken,\n    isExpired\n  } = useJwt(token);\n  const [articles, setArticles] = useState([]);\n  useEffect(() => {\n    getArticlesData();\n  }, []);\n  useEffect(() => {//onsole.log('article hat sich verändert', articles)\n  }, [articles]);\n\n  const getArticlesData = async () => {\n    const data = await fetch(\"http://localhost:3369/articles\");\n    const res = await data.json();\n    console.log(\"HAAAALLLOOOOO\", res);\n    /*  console.log(\"articles in fetch\", res) */\n\n    setArticles(res.reverse());\n    console.log(\"articles in articles Data: \", res);\n  };\n\n  const addNewArticle = async newArticle => {\n    newArticle.userId = decodedToken.id;\n    const res = await fetch('http://localhost:3369/articles', {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newArticle)\n    });\n    console.log(\"newArticle: \", newArticle);\n    const newArticleApi = await res.json();\n    console.log(\"newArticleApi: \", newArticleApi);\n    const upditArticle = [newArticleApi, ...articles];\n    setArticles(upditArticle);\n  };\n\n  const deleteArticle = async id => {\n    const deleteUrl = `http://localhost:3369/articles/${id}`;\n    const res = await fetch(deleteUrl, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': localStorage.getItem(\"food-token\") || \"\"\n      }\n    });\n    const articlesDeleteUpate = articles.filter(article => article._id !== id);\n    setArticles(articlesDeleteUpate);\n  };\n\n  const updateArticle = async (id, artUpdate) => {\n    const updateUrl = `http://localhost:3369/articles/${id}`;\n    const res = await fetch(updateUrl, {\n      method: \"PUT\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(artUpdate)\n    }); // const newArticleApi = await res.json();\n    // console.log('newArticleApi', newArticleApi)\n    // const ArticleUpdated = articles.map(article => article._id === id ? artUpdate : article);\n    // setArticles(ArticleUpdated)\n    // console.log(\"state set: \", articles)\n\n    getArticlesData();\n  };\n  /*     const getArticleById = (id) => {\n  \n          const article = articles.find(art => art._id === id);\n          console.log('article => ', article)\n          return article;\n      } */\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/articles\",\n        children: /*#__PURE__*/_jsxDEV(AllArticles, {\n          data: articles\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/create-article\",\n        children: /*#__PURE__*/_jsxDEV(CreateArticle, {\n          data: articles,\n          addNewArticle: addNewArticle,\n          deleteArticle: deleteArticle,\n          updateArticle: updateArticle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/article/:title\",\n        component: Article\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Articles, \"AGzwiqsSe/LZniqqNSVgRJaFnWM=\", false, function () {\n  return [useJwt];\n});\n\n_c = Articles;\nexport default Articles;\n\nvar _c;\n\n$RefreshReg$(_c, \"Articles\");","map":{"version":3,"sources":["/home/dci/Desktop/AllAufgaben/Final Projekt/final-project/frontend/src/components/Navbar/Pages/Articles.js"],"names":["CreateArticle","Article","AllArticles","useState","useEffect","Route","Switch","useJwt","token","localStorage","getItem","Articles","decodedToken","isExpired","articles","setArticles","getArticlesData","data","fetch","res","json","console","log","reverse","addNewArticle","newArticle","userId","id","method","mode","headers","body","JSON","stringify","newArticleApi","upditArticle","deleteArticle","deleteUrl","articlesDeleteUpate","filter","article","_id","updateArticle","artUpdate","updateUrl"],"mappings":"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","sourcesContent":["import CreateArticle from \"../../Articles/CreateArticle/CreateArticle\";\nimport Article from \"../../Articles/Article/Article\";\nimport AllArticles from \"../../Articles/AllArticles/AllArticles\";\nimport { useState, useEffect } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { useJwt } from \"react-jwt\";\nconst token = localStorage.getItem(\"food-token\")\n\nconst Articles = () => {\n    const { decodedToken, isExpired } = useJwt(token);\n\n    const [articles, setArticles] = useState([]);\n\n    useEffect(() => {\n        getArticlesData();\n    }, [])\n\n    useEffect(() => {\n        //onsole.log('article hat sich verändert', articles)\n\n\n    }, [articles])\n\n    const getArticlesData = async () => {\n        const data = await fetch(\"http://localhost:3369/articles\");\n        const res = await data.json();\n        console.log(\"HAAAALLLOOOOO\", res)\n        /*  console.log(\"articles in fetch\", res) */\n        setArticles(res.reverse());\n        console.log(\"articles in articles Data: \", res)\n    }\n\n    const addNewArticle = async (newArticle) => {\n\n        newArticle.userId = decodedToken.id;\n\n        const res = await fetch('http://localhost:3369/articles', {\n            method: 'POST',\n            mode: 'cors',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(newArticle)\n        });\n        console.log(\"newArticle: \", newArticle);\n        const newArticleApi = await res.json();\n        console.log(\"newArticleApi: \", newArticleApi);\n        const upditArticle = [newArticleApi, ...articles]\n        setArticles(upditArticle)\n\n    }\n\n    const deleteArticle = async (id) => {\n        const deleteUrl = `http://localhost:3369/articles/${id}`;\n        const res = await fetch(deleteUrl, {\n            method: 'DELETE',\n            headers: {\n                'Authorization': localStorage.getItem(\"food-token\") || \"\"\n            }\n        });\n        const articlesDeleteUpate = articles.filter(article => article._id !== id)\n        setArticles(articlesDeleteUpate)\n    }\n\n    const updateArticle = async (id, artUpdate) => {\n        const updateUrl = `http://localhost:3369/articles/${id}`;\n\n\n        const res = await fetch(updateUrl, {\n            method: \"PUT\",\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(artUpdate)\n\n        });\n        // const newArticleApi = await res.json();\n        // console.log('newArticleApi', newArticleApi)\n        // const ArticleUpdated = articles.map(article => article._id === id ? artUpdate : article);\n        // setArticles(ArticleUpdated)\n        // console.log(\"state set: \", articles)\n\n        getArticlesData();\n    }\n\n    /*     const getArticleById = (id) => {\n    \n            const article = articles.find(art => art._id === id);\n            console.log('article => ', article)\n            return article;\n        } */\n\n    return (\n        <div >\n            <Switch>\n                <Route path='/articles'>\n                    <AllArticles\n                        data={articles}\n\n                    />\n                </Route>\n\n                <Route path='/create-article'>\n                    <CreateArticle\n                        data={articles}\n                        addNewArticle={addNewArticle}\n                        deleteArticle={deleteArticle}\n                        updateArticle={updateArticle}\n                    />\n                </Route>\n\n\n                <Route path='/article/:title' component={Article}>\n                    {/*   <Article getArticleById={getArticleById} /> */}\n                </Route>\n\n            </Switch>\n\n\n        </div>\n    )\n}\nexport default Articles;"]},"metadata":{},"sourceType":"module"}